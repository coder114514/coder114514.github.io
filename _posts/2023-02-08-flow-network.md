---
title: 关于网络流
layout: posts
tags: OI notes
---

这篇文章会不定期更新。

这篇文章的目的在于记录对网络流直观的理解，而不在乎它形式化的严格定义和对定理的严格验证。

oi-wiki上有更详细的讲解。

## 什么是网络流

1. 容量网络（capacity network）：一个有向图，上面每条边的权值代表这条边的容量

![容量网络](https://c2.im5i.com/2023/02/08/nXbyz.png)

2. 流量网络（flow network）：加了流量的网络，x/y表示流量/容量

![流量网络](https://c2.im5i.com/2023/02/08/nXu76.png)

![一个流](https://c2.im5i.com/2023/02/08/nXHP8.png)

流量表示从源点到终点沿着一条路径“流过了多少东西”，它不能超过每条边的容量，流量可以叠加，所有流的和就是总流量

这个定义和更形式化的定义（也就是满足一些性质的从边到实数的映射）是等价的，因为流的守恒性

3. 残量网络（residual network）：首先给容量图中没有反向边的边加上权值为0的反向边，然后每条边的权值减去流过它的流量，反向边加上流量就得到了残量网络（权值为0的边可以省略）

加了反向边之后，你就能做“退流”，也就是撤销之前的流

![残量网络](https://c2.im5i.com/2023/02/08/nXAbL.png)

### 最大流

最大流就是一个容量网络能容纳的最大的总流量

不停地找增广路径（然后在残量图上加上相应的流量）直到没有任何增广路径，我们就可以得到最大流

增广路径，就是指残量图上从S到T能增加流量的路径
![增广路径](https://c2.im5i.com/2023/02/08/nXLmt.png)

#### 算法：
1. Ford-Fulkerson: 每次通过dfs找一条增广路径

复杂度: $\mathcal{O}(|E||f|)$

是最简单的最大流算法，但是复杂度很差，在有些图上运行时间会和容量成正比

Ford-Fulkerson Killer（如果每次dfs运气不好都过中间那条边的话，算法就至少要找200次增广路了）:
![Ford-Fulkerson Killer](https://c2.im5i.com/2023/02/08/nXzhq.png)

2. Edmond-Karp~~动能算法~~: 每次通过bfs找一条增广路径

复杂度更好一点：$\mathcal{O}(|V||E|^2)$

这个复杂度网上的伪证比较多，oi-wiki上有一个[严格的证明](https://oi-wiki.org/graph/flow/max-flow/#%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90)

3. Dinic: ~~还没学~~

### 最小割
